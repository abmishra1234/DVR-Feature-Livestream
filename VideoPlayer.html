<!DOCTYPE html>
<html>
<head>
    <title>Video Player</title>
    <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/7.14.3/video.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-hls@3.6.5/dist/videojs-contrib-hls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-dash@5.0.2/dist/videojs-dash.min.js"></script>
</head>
<body>
    <input type="file" id="videoFile" accept="video/mp4" />
    <br><br>
    <input type="text" id="streamUrl" placeholder="Enter live stream URL" />
    <br><br>
    <video id="videoPlayer" class="video-js vjs-default-skin" width="640" height="264" controls></video>
    <br><br>
    <button id="playButton">Play</button>
    <button id="stopButton">Stop</button>
    <div id="pauseTimer">
        <span id="pauseTimerCaption">Paused Time:</span>
        <br>
        <span id="pauseTimerValue">00:00:00</span>
    </div>

    <script>
        var videoPlayer = videojs('videoPlayer');
        var playButton = document.getElementById('playButton');
        var stopButton = document.getElementById('stopButton');
        var streamUrlInput = document.getElementById('streamUrl');
        var pauseTimerValue = document.getElementById('pauseTimerValue');
        var pauseTimerInterval;
        var pauseStartTime;

        // Reset the pause timer
        function resetPauseTimer() {
            clearInterval(pauseTimerInterval);
            pauseTimerValue.innerHTML = "00:00:00";
            pauseTimerInterval = null; // Ensure to clear the interval reference
        }

        // Update pause timer
        function updatePauseTimer() {
            var currentTime = new Date();
            var elapsedTime = currentTime - pauseStartTime;
            var hours = Math.floor(elapsedTime / (1000 * 60 * 60));
            var minutes = Math.floor((elapsedTime % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((elapsedTime % (1000 * 60)) / 1000);
            hours = hours < 10 ? "0" + hours : hours;
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            pauseTimerValue.innerHTML = hours + ":" + minutes + ":" + seconds;
        }

        document.getElementById('videoFile').addEventListener('change', function(event) {
            var file = event.target.files[0];
            var url = URL.createObjectURL(file);
            videoPlayer.src({ src: url, type: 'video/mp4' });
            videoPlayer.play();
        });

        streamUrlInput.addEventListener('keydown', function(event) {
            if (event.keyCode === 13) { // Enter key
                videoPlayer.src({ src: streamUrlInput.value, type: videoPlayer.canPlayType('application/vnd.apple.mpegurl') ? 'application/x-mpegURL' : 'application/dash+xml' });
                videoPlayer.play();
            }
        });

        playButton.addEventListener('click', function() {
            if (videoPlayer.paused()) {
                videoPlayer.play();
            } else {
                videoPlayer.pause();
            }
        });

        stopButton.addEventListener('click', function() {
            videoPlayer.pause();
            videoPlayer.currentTime(0);
            resetPauseTimer();
        });

        videoPlayer.on('play', function() {
            playButton.innerHTML = "Pause";
            resetPauseTimer();
        });

        videoPlayer.on('pause', function() {
            playButton.innerHTML = "Play";
            pauseStartTime = new Date();
            if (!pauseTimerInterval) {
                pauseTimerInterval = setInterval(updatePauseTimer, 1000);
            }
        });

        videoPlayer.on('error', function(event) {
            console.log('An error occurred while playing the video:', event);
            resetPauseTimer();
        });
    </script>
</body>
</html>
